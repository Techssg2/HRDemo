
<style>
    label {
        font-size: 12px;
    }

    input[type="text"]:disabled {
        color: #bdbdbd;
        border-color: #ececec;
        background: white;
    }

    #userGridReview .k-auto-scrollable {
        max-height: 300px;
        min-height: 0px;
    }

    #userGrid .k-auto-scrollable {
        max-height: 300px;
        min-height: 0px;
    }

    #userGrid .k-loading-image {
        background-image: none !important;
    }

    #userGrid .k-loading-color {
        opacity: 0;
    }

    .k-grid-content-locked {
        overflow: hidden;
    }


    /*.k-grid-content-locked {
        float: right;
        text-align: center;
    }

    .k-grid-header-locked {
        float: right;
        text-align: center;
    }*/

    /*.k-grid-header-locked table thead tr .k-header {
        text-align: center;
    }*/

    .k-grid-content {
        min-height: 0px !important;
        max-height: 500px !important;
    }

    #headerRoom {
        background-color: #E5E5E5;
        margin-right: 0px !important;
        margin-left: 0px;
    }

    #textHeader {
        color: #333;
        font-weight: bold !important;
        text-transform: uppercase;
    }

    .k-list-scroller {
        overflow-y: scroll;
    }

    #loading_bta {
        width: 100%;
        height: 100%;
        bottom: 35% !important;
        top: unset !important;
        z-index: 1000;
    }

    #dialog_Detail .k-auto-scrollable {
        max-height: 300px !important;
        min-height: 0px !important;
        overflow-y: auto !important;
    }

    .k-state-selected {
        background-color: transparent;
        border-color: transparent;
        background-image: none;
    }

    td.k-state-focused.k-state-selected {
        box-shadow: none;
    }

    .k-state-selected > .k-link {
        color: black;
    }

    .selected {
        background-color: #F35800;
        border-color: #F85A00;
        background-image: none, linear-gradient(to bottom, rgba(255, 255, 255, 0.2) 0px, rgba(255, 255, 255, 0) 100%);
    }

        .selected > .k-link {
            color: #FFF;
        }

    #dialog_Detail_Review .k-auto-scrollable {
        max-height: 300px !important;
        min-height: 0px !important;
    }

    .rOverBudget {
        background-color: #F9F1C7 !important;
    }

    .cOverBudgetNumber {
        color: #006EFA;
        font-size: 0.9em !important;
    }

    #attachmentViewDialog {
        min-height: 40vh !important;
        height: 96vh !important;
    }

    .close-owa-dialog {
        margin: 5px;
    }

    #btaListOverBudgetDetailGrid {
        width: 100%;
    }

        #btaListOverBudgetDetailGrid .k-grid-content {
            width: 100%;
            padding-right: 17px;
        }

        #btaListOverBudgetDetailGrid .k-grid-header {
            width: 100%;
        }
</style>
<!--<div class="row">
    <div id="loading_overbudget"></div>
    <div class="col-md-12">
        <div class="portlet bordered light" style="padding-bottom: 50px !important;">

            <div class="portlet-title">
                <div class="caption caption-md">
                    <span class="caption-subject uppercase">
                        {{title}}
                    </span>
                </div>
                <div class="actions">
                    <kendo-button class="btn btn-default btn-sm" ng-click="printForm()"
                                  ng-if="model.status == 'Completed' || model.status == 'Completed Changing'">
                        <i style="font-size: 12px; padding-right: 3px;" class="fa fa-file-pdf-o font-green-jungle"></i>
                        {{'COMMON_BUTTON_PRINT'|translate}}
                    </kendo-button>
                    <action-items model="model" save="save" form="btaForm" set-room="setRooms"></action-items>
                    <div add-class class="btn-group" current-class="btn-group" added-class="open">
                        <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"
                                aria-expanded="true" style="padding: 0px !important">
                            <img src="ClientApp/assets/images/icon/more.png" style="position: relative;top: -2px"
                                 class="ng-isolate-scope">
                        </button>
                        <ul class="dropdown-menu pull-right">
                            <li>
                                <a data-toggle="modal" class="ng-binding" ng-click="showProcessingStages()">
                                    <i class="fa fa-recycle right-5" style="color: #b42e83"></i>
                                    {{'COMMON_PROCESSING_STAGE' | translate}}
                                </a>
                            </li>
                            <li>
                                <a data-toggle="modal" class="ng-binding" ng-click="showTrackingHistory()" ng-if="isITHelpdesk">
                                    <i class="fa fa-book right-5" style="color: #b42e83"></i>
                                    {{'COMMON_TRACKING_HISTORY' | translate}}
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <div class="portlet-body">-->
                <!-- FORM1 -->
                <!--<div class="row ng-scope" style="padding: 15px 0;margin-bottom:15px">
                    <div class="col-sm-12">
                        <workflow-comment></workflow-comment>
                    </div>
                </div>

                <div class="row ng-scope" ng-if="resignationInProgress" style="padding: 15px 0;margin-bottom:15px">
                    <div class="col-sm-12">
                        <div class="note note-warning note-bordered" style="margin-bottom: 0px">
                            <h5 class="bold uppercase">{{'COMMON_WARNING'|translate}}:</h5>
                            <p></p>
                            <ul>
                                {{warning}}
                            </ul>
                            <p></p>
                        </div>
                    </div>
                </div>

                <div class="row ng-scope" ng-if="bookingDateTripWeekes && warningWeekBooking.length > 0 && (model.type == 2 || model.type == 3)" style="padding: 15px 0;margin-bottom:15px">
                    <div class="col-sm-12">
                        <div class="note note-warning note-bordered" style="margin-bottom: 0px">
                            <h5 class="bold uppercase">{{'COMMON_WARNING'|translate}}:</h5>
                            <p></p>
                            <ul>
                                <li ng-repeat="warning in warningWeekBooking track by $index">
                                    {{warning.message}}
                                </li>
                            </ul>
                            <p></p>
                        </div>
                    </div>
                </div>

                <div class="row ng-scope" ng-if="errors.length > 0" style="padding: 15px 0;margin-bottom:15px">
                    <div class="col-sm-12">
                        <div class="note note-danger note-bordered" style="margin-bottom: 0px">
                            <h5 class="bold uppercase">
                                {{'COMMON_ENTER_FIELD' | translate}} <span class="font-red-thunderbird">*</span>:
                            </h5>
                            <p></p>
                            <ul>
                                <li ng-repeat="error in errors track by $index">
                                    <span class="bold ">{{error.controlName}}</span>{{error.message  ?error.message: ''}}
                                </li>
                                <br />
                            </ul>
                            <p></p>
                        </div>
                    </div>
                </div>
                <div class="row ng-scope" ng-if="errorChangings.length > 0" style="padding: 15px 0;margin-bottom:15px">
                    <div class="col-sm-12">
                        <div class="note note-danger note-bordered" style="margin-bottom: 0px">
                            <h5 class="bold uppercase">
                                {{'COMMON_ENTER_FIELD' | translate}}
                                <span class="font-red-thunderbird">*</span>:
                            </h5>
                            <p></p>
                            <ul>
                                <li ng-repeat="error in errorChangings" style="margin-left: 1em;">
                                    <span class="bold">{{error.controlName}}</span>
                                    <zt ng-if="!error.isRule">
                                        : {{error.errorDetail}}
                                    </zt>
                                    <span ng-if="error.isRule">
                                        {{error.errorDetail}}
                                    </span>
                                </li>
                            </ul>
                            <p></p>
                        </div>
                    </div>
                </div>
                <div class="page-content-wrapper float-none">
                    <form name="btaForm">
                        <div class="form-horizontal">
                            <div class="form-body">
                                <div class="row align-middle" style="flex-wrap: wrap;">
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-md-4 control-label">{{'COMMON_DEPT_LINE'|translate}}:</label>
                                            <div class="col-md-8 ">
                                                <select kendo-drop-down-list name="dept_line_name" id="dept_line_id"
                                                        k-options="deptLineOptions" k-ng-model="model.deptLineId"
                                                        ng-disabled="true"
                                                        class="w100 input-default">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-md-4 control-label">{{'COMMON_DIVISION_GROUP'|translate}}:</label>
                                            <div class="col-md-8 ">
                                                <input kendo-drop-down-tree="divisionTree" class="w100 input-default"
                                                       k-on-change="onChangeDivision(model.deptDivisionId)"
                                                       k-options="divisionOptions" k-ng-model="model.deptDivisionId"
                                                       ng-disabled="true"
                                                       id="division_id" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-md-4 control-label">{{'COMMON_TYPE'|translate}}:<span class="font-red-thunderbird">*</span></label>
                                            <div class="col-md-8 ">
                                                <select kendo-drop-down-list style="width: 100%;"
                                                        ng-model="model.type"
                                                        k-data-text-field="'name'"
                                                        k-data-value-field="'value'"
                                                        k-data-source="businessTypeOption"
                                                        ng-disabled="true"
                                                        class="w100 input-default">
                                                </select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <label class="col-md-2 control-label" style="margin-top:5px !important">{{'COMMON_ROUNDTRIP'|translate}}:<span class="font-red-thunderbird">*</span></label>
                                            <div class="col-md-2" style="margin-top:10px !important">
                                                <select kendo-drop-down-list style="width: 100%;"
                                                        ng-model="model.roundTrip"
                                                        k-data-text-field="'name'"
                                                        k-data-value-field="'value'"
                                                        k-data-source="roundTripOption"
                                                        k-on-change="roundTripChange(model.roundTrip)"
                                                        ng-disabled="true"
                                                        class="w100 input-default">
                                                </select>-->
                                                <!--<input type="checkbox" id="isGroundTrip" ng-model="model.isRoundTrip" class="k-checkbox" />
                <label class="k-checkbox-label" for="isGroundTrip"></label>-->
                                            <!--</div>
                                            <label class="col-md-2 control-label" style="margin-top:5px !important">{{'COMMON_STATUS'|translate}}:</label>
                                            <div class="col-md-6">
                                                <input type="text" class="form-control input-default" id='statusTicket' style="width: 100%;"
                                                       ng-model="model.status" ng-disabled="true" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-4">
                                                <label class="control-label">
                                                    {{'BUSINESS_TRIP_APPLICATION'|translate}}:
                                                </label>
                                            </div>
                                            <div class="col-md-8">-->
                                                <!--<a ui-sref=".BTAOverBudget" ng-model="model.btaReferenceNumber">model.btaReferenceNumber</a>-->
                                                <!--<input type="text" class="form-control input-default" id='BTA' style="width: 100%;"
                                                       ng-model="model.btaReferenceNumber" ng-disabled="true" ng-click="printForm()" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-6">
                                        <div class="form-group">
                                            <div class="col-md-4">
                                                <label class="control-label">
                                                    {{'BTA_APPROVED_DAY'|translate}}:
                                                </label>
                                            </div>
                                            <div class="col-md-8">
                                                <input type="text" class="form-control input-default" id='' style="width: 100%;"
                                                       ng-model="BTAApprovedDay" ng-disabled="true"  />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <div class="row form-group">
                                            <div class="col-md-2">
                                                <label class="control-label">
                                                    {{'BTA_OVER_BUDGET_REASON'|translate}}:<span class="font-red-thunderbird">*</span>
                                                </label>
                                            </div>
                                            <div class="col-md-10">
                                                <textarea style="border-color: #8f8f8f; height: 80px;"
                                                          ng-model="model.comment" ng-disabled="true" class="form-control input-default"></textarea>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <p><b>{{'COMMON_NOTE'|translate}}: </b><span>*</span></p>
                                        <p>
                                            - <b>Ngân sách mới là tổng ngân sách mới của chuyến bay, không phải là phần ngân sách chênh lệch.</b> <br />
                                            <i>The new budget is the new total budget of the flight, not the difference.</i>
                                        </p>
                                    </div>

                                </div>

                                <div class="row mrb10">
                                    <div class="col-md-12">-->
                                        <!--<span class="input-group-btn">
                                            <a class="btn btn-sm btn-primary btn-add-user" id="create" ng-if="perm"
                                               style="background-color: #b42e83"
                                               ng-click="addItemsUser(employeesDataSource)">
                                                {{'ADD_USER_TITLE_DIALOG'| translate}}
                                            </a>
                                        </span>
                                        <span class="input-group-btn" id="viewBookingFlights">
                                        </span>-->
                                        <!--<span id="viewBookingFlights">
                                        </span>
                                    </div>
                                </div>

                                <div class="row mrt10">
                                    <div class="col-md-12">
                                        <kendo-grid id="btaListOverBudgetDetailGrid" options="btaListOverBudgetOption">
                                        </kendo-grid>
                                    </div>
                                </div>



                                <div class="row" style="margin-top: 40px;">-->

                                    <!-- <div class="col-md-12">
                                        <div class="form-group control-label">
                                            <input type="checkbox" id="argree_id" ng-model="model.isAgree"
                                                class="k-checkbox">
                                            <label class="k-checkbox-label" for="argree_id">
                                                <p style="font-style: italic;">
                                                    Tôi cam kết tuân thủ các quy định về thời gian và địa điểm đến xe.
                                                    Nếu có thay đổi, tôi sẽ thông báo cho phòng Nhân sự và Hành chính
                                                    trước ngày 20 hàng tháng.
                                                    <br />(I commit to comply with rules on time and bus stop. If there
                                                    is any change, I will inform HR & Admin Department before the 20th
                                                    day of each month.)
                                                </p>
                                            </label>
                                        </div>
                                    </div> -->
                                    <!--<div class="col-md-12">
                                        <div class="row">
                                            <div class="col-md-6">
                                                <div class="form-group">
                                                    <label class="col-md-4 control-label">{{'ATTACHMENT_DETAIL'| translate}}:</label>
                                                    <div class="col-md-8">
                                                        <input name="files" id="attachmentDetail" type="file" kendo-upload
                                                               k-async="{ saveUrl: 'save', removeUrl: 'remove', autoUpload: false }"
                                                               k-select="onSelect" k-remove="removeAttach"
                                                               class="input-default" />
                                                    </div>
                                                    <label class="col-md-4 control-label"
                                                           ng-if="oldAttachmentDetails && oldAttachmentDetails.length"></label>
                                                    <div class="col-md-8" style="margin-top: 10px; padding-left: 30px;"
                                                         ng-if="oldAttachmentDetails && oldAttachmentDetails.length">
                                                        <p><b>{{'UPLOADED_FILE_LIST'| translate}}</b></p>
                                                        <ol>
                                                            <li ng-repeat="doc in oldAttachmentDetails">
                                                                <span>
                                                                    <a ng-click="downloadAttachment(doc.id)">{{doc.fileDisplayName}}</a>
                                                                </span>
                                                                <span ng-click="viewFileOnline(doc.id)" class="viewAttachmentDetail"
                                                                      style="color: #5b9bd1; cursor: pointer;">
                                                                    |
                                                                    {{'COMMON_BUTTON_VIEW'| translate}}
                                                                </span>
                                                                <span ng-click="removeOldAttachment(doc)" class="deleteattachmentDetail"
                                                                      style="color: #5b9bd1; cursor: pointer;">
                                                                    |
                                                                    {{'COMMON_BUTTON_DELETE'| translate}}
                                                                </span>
                                                            </li>
                                                        </ol>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="row">
                                            <div class="col-md-12">
                                                <div class="row form-group">
                                                    <div class="col-md-2">
                                                        <label class="control-label">
                                                            {{'COMMON_REQUESTOR_NOTE'|translate}}:<span class="font-red-thunderbird">*</span>
                                                        </label>
                                                    </div>
                                                    <div class="col-md-10">
                                                        <textarea style="border-color: #8f8f8f; height: 80px;"
                                                                  ng-model="model.requestorNote" class="form-control input-default"></textarea>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>-->
                                <!--</div>

                            </div>
                        </div>
                    </form>
                </div>

            </div>
            <div class="portlet-title">
                <div class="actions">
                    <action-items model="model" save="save" form="g1" set-room="setRooms"></action-items>
                </div>
            </div>

        </div>
    </div>
</div>-->
<div class="p-3">
    <div class="row title-wrapper stickybar-1">
        <div class="col-6">
            <h2 class="widget-title">{{titleHeader}}</h2>
        </div>
        <div class="col-6">
            <div class="d-flex gap-2 flex-wrap justify-content-end">
                <action-items  class="d-flex flex-wrap justify-content-end align-items-center" style="flex: 1 1 auto; gap: 4px;" model="model" save="save" form="btaForm" set-room="setRooms"></action-items>
                <button type="button" ng-click="printForm()" ng-if="model.status == 'Completed' || model.status == 'Completed Changing'" class="btn btn-outline-dark rounded-3 btn-sm poppins-regular display-9 m-1 ng-binding">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="6 9 6 2 18 2 18 9"></polyline>
                        <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                        <rect x="6" y="14" width="12" height="8"></rect>
                    </svg>&nbsp;{{'COMMON_BUTTON_PRINT'|translate}}
                </button>
            </div>
        </div>
    </div>
    <div class="portlet-body mb-3">
        <div class="mt-3">
            <div class="accordion accordion-style1">
                <div class="accordion-item">
                    <div class="accordion-collapse collapse show">
                        <div class="portlet bordered light">
                            <!-- Title -->
                            <div class="row p-3">
                                <div class="col-6">
                                    <div class="row">
                                        <div class="col-4 name-wrapper" style="word-wrap: break-word;" ng-if="title">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="16" height="16" viewBox="0 0 46 46">
                                                <path id="_12.File" data-name="12.File" d="M37,47H11a4,4,0,0,1-4-4V5a4,4,0,0,1,4-4H30a.984.984,0,0,1,.776.395l9.829,9.829A.981.981,0,0,1,41,12h0V43A4,4,0,0,1,37,47ZM31,4.381V11h6.619ZM39,13H30a1,1,0,0,1-1-1V3H11A2,2,0,0,0,9,5V43a2,2,0,0,0,2,2H37a2,2,0,0,0,2-2ZM33,39H15a1,1,0,0,1,0-2H33a1,1,0,0,1,0,2Zm0-8H15a1,1,0,0,1,0-2H33a1,1,0,0,1,0,2Zm0-8H15a1,1,0,0,1,0-2H33a1,1,0,0,1,0,2Z" transform="translate(-7 -1)" fill-rule="evenodd"></path>
                                            </svg>&nbsp;{{title}}
                                        </div>
                                        <div class="col-4 name-wrapper" style="word-wrap: break-word;">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="16" height="16" viewBox="0 0 24 24">
                                                <path d="M12 4a4 4 0 1 0 0 8 4 4 0 0 0 0-8zM6 8a6 6 0 1 1 12 0A6 6 0 0 1 6 8zm2 10a3 3 0 0 0-3 3 1 1 0 1 1-2 0 5 5 0 0 1 5-5h8a5 5 0 0 1 5 5 1 1 0 1 1-2 0 3 3 0 0 0-3-3H8z" fill="#0D0D0D"></path>
                                            </svg>&nbsp;{{ model.userCreatedFullName }} <!--({{ model.employeeCode }})-->
                                        </div>
                                        <div class="col-4 name-wrapper" style="word-wrap: break-word;" ng-if="model.created">
                                            <svg xmlns="http://www.w3.org/2000/svg" fill="#000000" width="16" height="16" viewBox="0 0 24 24">
                                                <path d="M9 2a1 1 0 0 1 1 1v1h4V3a1 1 0 1 1 2 0v1h3a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h3V3a1 1 0 0 1 1-1zM8 6H5v3h14V6h-3v1a1 1 0 1 1-2 0V6h-4v1a1 1 0 0 1-2 0V6zm11 5H5v8h14v-8z" fill="#0D0D0D"></path>
                                            </svg>&nbsp;{{ model.created | date:'dd/MM/yyyy HH:mm' }}
                                        </div>
                                    </div>
                                </div>
                                <div class="col-6 d-flex flex-wrap justify-content-end">
                                    <button class="btn-none dropdown-toggle"
                                            type="button"
                                            data-bs-toggle="dropdown"
                                            aria-expanded="false">
                                        <svg xmlns="http://www.w3.org/2000/svg"
                                             width="16"
                                             height="16"
                                             fill="currentColor"
                                             class="bi bi-three-dots-vertical"
                                             viewBox="0 0 16 16">
                                            <path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0" />
                                        </svg>
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-sm dropdown-menu-end dropdown-menu-text-link display-11 text-center">
                                        <li>
                                            <a class="dropdown-item" href="" ng-click="showTrackingHistory()" ng-if="isITHelpdesk">
                                                <svg width="16" height="16" viewBox="0 0 18 18" xmlns="http://www.w3.org/2000/svg">
                                                    <g fill="currentColor" fill-rule="evenodd" transform="translate(2 1)">
                                                        <path fill-rule="nonzero" d="M3 4C3 3.44772 3.44772 3 4 3 4.55228 3 5 3.44772 5 4 5 4.55228 4.55228 5 4 5 3.44772 5 3 4.55228 3 4zM7 3C6.44772 3 6 3.44772 6 4 6 4.55228 6.44771 5 7 5L8 5C8.5523 5 9 4.55228 9 4 9 3.44772 8.5523 3 8 3L7 3zM6 7C6 6.44772 6.44772 6 7 6L8 6C8.5523 6 9 6.44772 9 7 9 7.55228 8.5523 8 8 8L7 8C6.44771 8 6 7.55228 6 7zM3 7C3 6.44772 3.44772 6 4 6 4.55228 6 5 6.44772 5 7 5 7.55228 4.55228 8 4 8 3.44772 8 3 7.55228 3 7zM6 10C6 9.4477 6.44772 9 7 9L8 9C8.5523 9 9 9.4477 9 10 9 10.5523 8.5523 11 8 11L7 11C6.44771 11 6 10.5523 6 10zM3 10C3 9.4477 3.44772 9 4 9 4.55228 9 5 9.4477 5 10 5 10.5523 4.55228 11 4 11 3.44772 11 3 10.5523 3 10z"></path>
                                                        <path d="M0,1 C0,0.44772 0.44772,0 1,0 L11,0 C11.5523,0 12,0.44772 12,1 L12,13 C12,13.5523 11.5523,14 11,14 L1,14 C0.44772,14 0,13.5523 0,13 L0,1 Z M2,12 L2,2 L10,2 L10,12 L2,12 Z"></path>
                                                    </g>
                                                </svg>&nbsp;{{'COMMON_TRACKING_HISTORY'|translate}}
                                            </a>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <div class="row" style="padding-left: 0 !important; padding-top: 0 !important;">
                                <div class="col-6">
                                    <span class="badge badge-style1 justify-content-start" ng-if="model.status"
                                          ng-class="{
                                                     'badge-orange': model.status != 'Completed' && model.status != 'Draft' && model.status != 'Cancelled' && model.status != 'Reject' && model.status != 'Out Of Period',
                                                     'badge-green': model.status == 'Completed',
                                                     'badge-red': model.status == 'Cancelled' || model.status == 'Reject' || model.status == 'Out Of Period',
                                                     '': model.status == 'Draft'
                                                   }">
                                        {{statusTranslate}}
                                    </span>
                                </div>
                                <div class="col-6">
                                    <div class="mt-2 d-flex flex-column flex-lg-row justify-content-end">
                                        <div class="progresses" ng-repeat="item in currentInstanceProcessingStage.workflowData.steps">
                                            <div class="steps badge-green" ng-if="item.stepNumber == 1">
                                                <svg xmlns="http://www.w3.org/2000/svg"
                                                     width="16"
                                                     height="16"
                                                     viewBox="0 0 24 24"
                                                     fill="none"
                                                     stroke="#ffffff"
                                                     stroke-width="2"
                                                     stroke-linecap="round"
                                                     stroke-linejoin="round">
                                                    <polyline points="20 6 9 17 4 12"></polyline>
                                                </svg>
                                            </div>
                                            <span class="line" ng-if="item.stepNumber == 1"></span>
                                            <div class="steps" ng-class="!item.histories ? '' : {'badge-green': item.histories.voteType == 1 && item.histories.isStepCompleted,
                                                   'badge-yellow-60': item.histories.voteType == 3,
                                                   'badge-outline-orange': item.histories.voteType == 0 && !item.histories.isStepCompleted,
                                                   'badge-red': (item.histories.voteType == 2 || item.histories.voteType == 4)}" ng-if="item.stepNumber != 1">
                                                <div class="tooltip-custom tooltip-style2 tooltip-below">
                                                    {{item.stepNumber}}
                                                    <span class="tooltip-text">
                                                        <span class="badge btn-grey rounded-pill poppins-regular display-12 leading-14">Round {{processingStageRound}}</span>
                                                        <p class="text-orange poppins-medium display-11" style="text-transform: uppercase;">
                                                            {{item.stepName}}
                                                        </p>
                                                        <p class="display-12" ng-if="(item.histories.assignedToUserFullName || item.histories.assignedToDepartmentName)">
                                                            <span class="text-grey">Assign To: </span>
                                                            <span style="text-transform: uppercase;">
                                                                {{item.histories.assignedToUserFullName ? item.histories.assignedToUserFullName: item.histories.assignedToDepartmentName}}
                                                            </span>
                                                        </p>
                                                    </span>
                                                </div>
                                            </div>
                                            <span class="line" ng-if="item.stepNumber != 1 && currentInstanceProcessingStage.workflowData.steps[currentInstanceProcessingStage.workflowData.steps.length - 1].stepNumber != item.stepNumber"></span>
                                        </div>
                                        <a href="#" style="padding-left: 20px"
                                           data-bs-toggle="modal"
                                           data-bs-target="#exampleModalView5">
                                            View more
                                            <svg xmlns="http://www.w3.org/2000/svg"
                                                 width="10"
                                                 height="10"
                                                 viewBox="0 0 24 24"
                                                 fill="none"
                                                 stroke="#0D6EFD"
                                                 stroke-width="2"
                                                 stroke-linecap="round"
                                                 stroke-linejoin="round">
                                                <path d="M9 18l6-6-6-6" />
                                            </svg>
                                        </a>
                                    </div>
                                </div>
                            </div>

                            <!--<div class="row ng-scope" style="padding: 15px 0;margin-bottom:15px">
                                <div class="col-sm-12">
                                    <workflow-comment></workflow-comment>
                                </div>
                            </div>-->

                            <div class="alert alert-danger-style1 mb-3" ng-if="resignationInProgress" style="padding: 15px 0;margin-bottom:15px">
                                <div class="col-sm-12">
                                    <div class="note note-warning note-bordered" style="margin-bottom: 0px">
                                        <h5 class="bold uppercase">{{'COMMON_WARNING'|translate}}:</h5>
                                        <p></p>
                                        <ul>
                                            {{warning}}
                                        </ul>
                                        <p></p>
                                    </div>
                                </div>
                            </div>

                            <div class="alert alert-danger-style1 mb-3" ng-if="bookingDateTripWeekes && warningWeekBooking.length > 0 && (model.type == 2 || model.type == 3)" style="padding: 15px 0;margin-bottom:15px">
                                <div class="col-sm-12">
                                    <div class="note note-warning note-bordered" style="margin-bottom: 0px">
                                        <h5 class="bold uppercase">{{'COMMON_WARNING'|translate}}:</h5>
                                        <p></p>
                                        <ul>
                                            <li ng-repeat="warning in warningWeekBooking track by $index">
                                                {{warning.message}}
                                            </li>
                                        </ul>
                                        <p></p>
                                    </div>
                                </div>
                            </div>

                            <div class="alert alert-danger-style1 mb-3" ng-if="errors.length > 0" style="padding: 15px 0;margin-bottom:15px">
                                <div class="col-sm-12">
                                    <div class="note note-danger note-bordered" style="margin-bottom: 0px">
                                        <h5 class="bold uppercase">
                                            {{'COMMON_ENTER_FIELD' | translate}} <span class="font-red-thunderbird">*</span>:
                                        </h5>
                                        <p></p>
                                        <ul>
                                            <li ng-repeat="error in errors track by $index">
                                                <span class="bold ">{{error.controlName}}</span>{{error.message  ?error.message: ''}}
                                            </li>
                                            <br />
                                        </ul>
                                        <p></p>
                                    </div>
                                </div>
                            </div>
                            <div class="alert alert-danger-style1 mb-3" ng-if="errorChangings.length > 0" style="padding: 15px 0;margin-bottom:15px">
                                <div class="col-sm-12">
                                    <div class="note note-danger note-bordered" style="margin-bottom: 0px">
                                        <h5 class="bold uppercase">
                                            {{'COMMON_ENTER_FIELD' | translate}}
                                            <span class="font-red-thunderbird">*</span>:
                                        </h5>
                                        <p></p>
                                        <ul>
                                            <li ng-repeat="error in errorChangings" style="margin-left: 1em;">
                                                <span class="bold">{{error.controlName}}</span>
                                                <zt ng-if="!error.isRule">
                                                    : {{error.errorDetail}}
                                                </zt>
                                                <span ng-if="error.isRule">
                                                    {{error.errorDetail}}
                                                </span>
                                            </li>
                                        </ul>
                                        <p></p>
                                    </div>
                                </div>
                            </div>

                            <div class="accordion-body">
                                <form name="btaForm">
                                    <div class="form-horizontal">
                                        <div class="form-body">
                                            <div class="row align-middle" style="flex-wrap: wrap;">
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label text-secondary">
                                                            {{'COMMON_DEPT_LINE'|translate}}:
                                                        </label>
                                                        <select kendo-drop-down-list name="dept_line_name" id="dept_line_id"
                                                                k-options="deptLineOptions" k-ng-model="model.deptLineId"
                                                                ng-disabled="true"
                                                                class="form-control w100 input-default">
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label text-secondary">
                                                            {{'COMMON_DIVISION_GROUP'|translate}}:
                                                        </label>
                                                        <input kendo-drop-down-tree="divisionTree" class="form-control w100 input-default"
                                                               k-on-change="onChangeDivision(model.deptDivisionId)"
                                                               k-options="divisionOptions" k-ng-model="model.deptDivisionId"
                                                               ng-disabled="true"
                                                               id="division_id" />
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label text-secondary">
                                                            {{'COMMON_TYPE'|translate}}:
                                                            <span class="text-danger">*</span>
                                                        </label>

                                                        <select kendo-drop-down-list style="width: 100%;"
                                                                ng-model="model.type"
                                                                k-data-text-field="'name'"
                                                                k-data-value-field="'value'"
                                                                k-data-source="businessTypeOption"
                                                                ng-disabled="true"
                                                                class="form-control w100 input-default">
                                                        </select>
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label text-secondary">
                                                            {{'COMMON_ROUNDTRIP'|translate}}:
                                                            <span class="text-danger">*</span>
                                                        </label>

                                                        <select kendo-drop-down-list style="width: 100%;"
                                                                ng-model="model.roundTrip"
                                                                k-data-text-field="'name'"
                                                                k-data-value-field="'value'"
                                                                k-data-source="roundTripOption"
                                                                k-on-change="roundTripChange(model.roundTrip)"
                                                                ng-disabled="true"
                                                                class="form-control w100 input-default">
                                                        </select>
                                                    </div>
                                                </div>

                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label text-secondary">
                                                            {{'BUSINESS_TRIP_APPLICATION'|translate}}:
                                                        </label>
                                                        <input type="text" class="form-control input-default" id='BTA' style="width: 100%;"
                                                               ng-model="model.btaReferenceNumber" ng-disabled="true" ng-click="printForm()" />
                                                    </div>
                                                </div>
                                                <div class="col-md-6">
                                                    <div class="form-group">
                                                        <label class="form-label text-secondary">
                                                            {{'BTA_APPROVED_DAY'|translate}}:
                                                        </label>
                                                        <input type="text" class="form-control input-default" id='' style="width: 100%;"
                                                               ng-model="BTAApprovedDay" ng-disabled="true" />
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <div class="form-group">
                                                        <label class="form-label text-secondary">
                                                            {{'BTA_OVER_BUDGET_REASON'|translate}}:<span class="text-danger">*</span>
                                                        </label>
                                                        <textarea style="border-color: #8f8f8f; height: 80px;"
                                                                  ng-model="model.comment" ng-disabled="true" class="form-control input-default"></textarea>
                                                    </div>
                                                </div>
                                                <div class="col-md-12">
                                                    <p><b>{{'COMMON_NOTE'|translate}}: </b><span>*</span></p>
                                                    <p>
                                                        - <b>Ngân sách mới là tổng ngân sách mới của chuyến bay, không phải là phần ngân sách chênh lệch.</b> <br />
                                                        <i>The new budget is the new total budget of the flight, not the difference.</i>
                                                    </p>
                                                </div>

                                                <div class="row mrb10">
                                                    <div class="col-md-12">
                                                        <span id="viewBookingFlights">
                                                        </span>
                                                    </div>
                                                </div>

                                                <div class="col-md-12">
                                                    <kendo-grid id="btaListOverBudgetDetailGrid" options="btaListOverBudgetOption">
                                                    </kendo-grid>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </form>
                            </div>

                            <div class="d-flex align-items-center justify-content-between">
                                <div class="group poppins-medium text-grey-300">
                                </div>
                                <div class="d-flex align-items-center">
                                    <div class="me-2" style="margin-bottom:12px">
                                        <action-items model="model" save="save" form="g1" set-room="setRooms"></action-items>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- Content -->
    </div>
</div>
<processing-stage workflow-instances="workflowInstances" model="model"></processing-stage>
<tracking-history tracking-history="trackingHistory"></tracking-history>

<!-- View File Online -->
<div id="attachmentViewDialog" style="height: 100% !important; display: none;" k-modal="true" k-visible="false">
    <iframe id="attachment_owa" style="width:100%;height:97%;padding:0px!important;"></iframe>
    <button class="btn btn-outline-dark rounded-3 btn-sm poppins-regular display-9 m-1" ng-click="owaClose()"><i class="k-icon k-i-close font-green-jungle"></i> Close</button>
</div>
<!--dialog Search Ticket-->
<div id="dialog_SearchTicket" kendo-dialog="dialogSearchTicket" k-on-open="dialogVisible = true" style="max-height:625px;"
     k-on-close="dialogVisible = false" k-modal="true" k-visible="false" options="dialogSearchTicketOption" k-width="1500" ng-disabled="true">

    <div class="row">
        <div class="col-md-12">
            <search-flight search-ticket-scope="searchTicketScope" id="searchTicketPanel" />
        </div>
    </div>
</div>
<style>
    .ring {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%,-50%);
        width: 150px;
        height: 150px;
        background: transparent;
        border-radius: 50%;
        text-align: center;
        line-height: 150px;
        font-family: sans-serif;
        font-size: 20px;
        color: #FF00DC;
        letter-spacing: 4px;
        text-transform: uppercase;
        margin-top: 10px;
    }

        .ring:before {
            content: '';
            position: absolute;
            top: -3px;
            left: -3px;
            width: 100%;
            height: 100%;
            border: 3px solid transparent;
            border-top: 3px solid #FF00DC;
            border-right: 3px solid #FF00DC;
            border-radius: 50%;
            animation: animateC 2s linear infinite;
        }

    .loading1 {
        display: block;
        position: absolute;
        top: calc(50% - 2px);
        left: 50%;
        width: 50%;
        height: 4px;
        background: transparent;
        transform-origin: left;
        animation: animate 2s linear infinite;
        margin-top: 10px;
        margin-bottom: 10px;
    }

        .loading1:before {
            content: '';
            position: absolute;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: #FF00DC;
            top: -6px;
            right: -8px;
        }

    @keyframes animateC {
        0% {
            transform: rotate(0deg);
        }

        100% {
            transform: rotate(360deg);
        }
    }

    @keyframes animate {
        0% {
            transform: rotate(45deg);
        }

        100% {
            transform: rotate(405deg);
        }
    }


    .dialog_LoadingSearchTicket {
        width: 100%;
        height: 100%;
        overflow: auto;
    }
</style>
<!-- Dialog Loading -->
<div id="dialog_LoadingSearchTicket" kendo-dialog="dialogLoadingSearchTicket" options="dialogLoadingSearchOption">
    <div style=" margin-top:10px;">
        <ul>
            <div class="alert alert-warning" style="clear: both; margin-top: 10px; margin-bottom: 10px; font-size: 14px;">
                <p>{{'COMMON_WAITING_SEARCH_TICKET'|translate}}</p>
            </div>
            <div class="row">
                <div class="ring">
                    Loading
                    <span id="loading1"></span>
                </div>
            </div>
        </ul>
    </div>

</div>
<!--dialog View Ticket-->
<div id="dialog_ViewTicket" kendo-dialog="dialogViewTicket" k-on-open="dialogVisible = true" k-width="1500"
     k-on-close="dialogVisible = false" k-modal="true" k-visible="false" options="dialogViewTicketOption">

    <div class="row">
        <div class="col-md-12">
            <flight-ticket view-ticket-scope="viewTicketScope" id="viewTicketPanel" />
        </div>
    </div>
</div>


