USE [SyncOrgchart]
GO
/****** Object:  Table [dbo].[Backup_Department_Detail]    Script Date: 7/28/2025 4:38:34 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Backup_Department_Detail](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[BackupHeaderId] [int] NOT NULL,
	[ItemId] [uniqueidentifier] NOT NULL,
	[Code] [nvarchar](255) NULL,
	[Name] [nvarchar](255) NULL,
	[Type] [int] NULL,
	[JobGradeId] [uniqueidentifier] NULL,
	[ParentId] [uniqueidentifier] NULL,
	[SAPCode] [nvarchar](255) NULL,
	[Grade] [int] NULL,
	[GradeTile] [nvarchar](255) NULL,
	[PositionCode] [nvarchar](255) NULL,
	[PositionName] [nvarchar](255) NULL,
	[RegionId] [uniqueidentifier] NULL,
	[RegionName] [nvarchar](255) NULL,
	[BusinessModelId] [uniqueidentifier] NULL,
	[IsFromIT] [bit] NULL,
	[IsEdoc] [bit] NULL,
	[IsEdoc1] [bit] NULL,
	[SAPObjectId] [nvarchar](255) NULL,
	[SAPObjectType] [nvarchar](255) NULL,
	[SAPDepartmentParentName] [nvarchar](255) NULL,
	[SAPDepartmentParentId] [nvarchar](255) NULL,
	[SAPLevel] [nvarchar](50) NULL,
	[SAPValidFrom] [nvarchar](50) NULL,
	[SAPValidTo] [nvarchar](50) NULL,
	[CreatedAt] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Backup_Header]    Script Date: 7/28/2025 4:38:34 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Backup_Header](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[CreatedAt] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Backup_User_Detail]    Script Date: 7/28/2025 4:38:34 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Backup_User_Detail](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[BackupHeaderId] [int] NOT NULL,
	[ItemId] [uniqueidentifier] NOT NULL,
	[FullName] [nvarchar](255) NOT NULL,
	[SAPCode] [nvarchar](255) NOT NULL,
	[IsActivated] [bit] NULL,
	[CreatedAt] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Backup_UserInDepartment_Detail]    Script Date: 7/28/2025 4:38:34 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Backup_UserInDepartment_Detail](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[BackupHeaderId] [int] NOT NULL,
	[ItemId] [uniqueidentifier] NOT NULL,
	[DepartmentId] [uniqueidentifier] NOT NULL,
	[UserId] [uniqueidentifier] NOT NULL,
	[IsHeadCount] [int] NULL,
	[Role] [int] NULL,
	[CreatedAt] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Staging_Detail]    Script Date: 7/28/2025 4:38:34 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Staging_Detail](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[HeaderId] [int] NOT NULL,
	[Level] [varchar](20) NULL,
	[ObjectId] [varchar](20) NULL,
	[ObjectName] [nvarchar](255) NULL,
	[ObjectType] [nvarchar](10) NULL,
	[ParentId] [varchar](20) NULL,
	[ParentName] [nvarchar](255) NULL,
	[IsHead] [varchar](5) NULL,
	[EmployeeJg] [nvarchar](10) NULL,
	[OrgJobgrade] [nvarchar](10) NULL,
	[PersonalArea] [nvarchar](50) NULL,
	[SubArea] [nvarchar](50) NULL,
	[ValidFrom] [varchar](20) NULL,
	[ValidTo] [varchar](20) NULL,
	[EmployeeId] [varchar](20) NULL,
	[AbbrName] [varchar](20) NULL,
	[ModifyDate] [varchar](20) NULL,
	[Concurrently] [varchar](5) NULL,
	[JsonData] [nvarchar](max) NULL,
	[CreatedAt] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
/****** Object:  Table [dbo].[Staging_Header]    Script Date: 7/28/2025 4:38:34 PM ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE [dbo].[Staging_Header](
	[Id] [int] IDENTITY(1,1) NOT NULL,
	[SyncType] [nvarchar](50) NOT NULL,
	[SyncTime] [datetime] NOT NULL,
	[Status] [nvarchar](20) NOT NULL,
	[JsonAllData] [nvarchar](max) NULL,
	[Note] [nvarchar](max) NULL,
	[CreatedAt] [datetime] NOT NULL,
PRIMARY KEY CLUSTERED 
(
	[Id] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON, OPTIMIZE_FOR_SEQUENTIAL_KEY = OFF) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]
GO
ALTER TABLE [dbo].[Backup_Department_Detail] ADD  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[Backup_Header] ADD  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[Backup_User_Detail] ADD  DEFAULT ((0)) FOR [IsActivated]
GO
ALTER TABLE [dbo].[Backup_User_Detail] ADD  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[Backup_UserInDepartment_Detail] ADD  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[Staging_Detail] ADD  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[Staging_Header] ADD  DEFAULT (getdate()) FOR [CreatedAt]
GO
ALTER TABLE [dbo].[Backup_Department_Detail]  WITH CHECK ADD FOREIGN KEY([BackupHeaderId])
REFERENCES [dbo].[Backup_Header] ([Id])
GO
ALTER TABLE [dbo].[Backup_User_Detail]  WITH CHECK ADD FOREIGN KEY([BackupHeaderId])
REFERENCES [dbo].[Backup_Header] ([Id])
GO
ALTER TABLE [dbo].[Backup_UserInDepartment_Detail]  WITH CHECK ADD FOREIGN KEY([BackupHeaderId])
REFERENCES [dbo].[Backup_Header] ([Id])
GO
ALTER TABLE [dbo].[Staging_Detail]  WITH CHECK ADD FOREIGN KEY([HeaderId])
REFERENCES [dbo].[Staging_Header] ([Id])
GO
